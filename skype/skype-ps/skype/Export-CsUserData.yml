### YamlMime:PowershellCmdlet
summary: |-
  Exports user data in a format that can be imported into Skype for Business Server 2015.
  The data will be exported as a .ZIP file containing a pair of XML documents.
  This cmdlet was introduced in Lync Server 2013.
module: SkypeForBusiness
notes: ""
inputs:
- name: <xref href="None" data-throw-if-not-resolved="False" />
  description: ""
outputs:
- name: <xref href=" " data-throw-if-not-resolved="False" />
  description: |-
    The `Export-CsUserData` cmdlet creates new .ZIP files.
links:
- text: Convert-CsUserData
  href: Convert-CsUserData.yml
- text: Import-CsUserData
  href: Import-CsUserData.yml
- text: Sync-CsUserData
  href: Sync-CsUserData.yml
- text: Update-CsUserData
  href: Update-CsUserData.yml
syntaxes:
- >-
  Export-CsUserData -FileName <String> -Identity <String> [-ConfDirectoryFilter <String>]

   [-DomainController <Fqdn>] [-Force] [-LegacyFormat] [-UserFilter <String>] [-UserFileFilter <String>]

   [<CommonParameters>]
- >-
  Export-CsUserData -FileName <String> -PoolFqdn <Fqdn> [-ConfDirectoryFilter <String>]

   [-DomainController <Fqdn>] [-Force] [-LegacyFormat] [-UserFilter <String>] [-UserFileFilter <String>]

   [<CommonParameters>]
- >-
  Export-CsUserData -FileName <String> -SqlInstanceName <String> [-ConfDirectoryFilter <String>]

   [-DbName <String>] [-DomainController <Fqdn>] [-Force] [-LegacyFormat] [-UserFileFilter <String>]

   [-UserFilter <String>] [<CommonParameters>]
examples:
- title: '-------------------------- Example 1 --------------------------'
  code: |-
    Export-CsUserData -PoolFqdn "atl-cs-001.litwareinc.com" -FileName "C:\Logs\ExportedUserData.zip"
  description: |-
    The command shown in Example 1 exports user data from the pool atl-cs-001.litwareinc.com to a file named C:\Logs\ExportedUserData.zip.
  summary: ""
parameters:
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: ConfDirectoryFilter
  description: |+
    When specified, allows you to export conference directory information for the specified conference directory.
    For example, to export data from the conference directory with the ID 13 use this syntax:

    -ConfDirectoryFilter 13

    You can return conference directory IDs by using this command:

    `Get-CsConferenceDirectory`

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: DbName
  description: |+
    Name of the SQL Server database containing the user data to be exported.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="Fqdn" data-throw-if-not-resolved="False" />
  name: DomainController
  description: |+
    Enables administrators to specify the FQDN of the domain controller to be used when running the `Export-CsUserData` cmdlet.
    If not specified, the cmdlet will use the first available domain controller.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: FileName
  isRequired: true
  description: |+
    Full path to the .ZIP file that the `Export-CsUserData` cmdlet will create; this file will contain the exported user data.
    For example:

    -FileName "C:\Logs\ExportedData.zip"

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: Force
  description: |+
    Suppresses the display of any non-fatal error message that might occur when running the command.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Identity
  isRequired: true
  description: |+
    Fully qualified domain name of the pool where the User database containing the user data to be exported is installed.
    For example:

    -Identity "atl-sql-001.litwareinc.com"

    Note that you can retrieve fully qualified domain names for your User database pools by running this command:

    Get-CsService -UserDatabase

  defaultValue: None
  pipelineInput: true
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: LegacyFormat
  description: |+
    When specified, data is saved in the format used by Microsoft Lync Server 2010.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="Fqdn" data-throw-if-not-resolved="False" />
  name: PoolFqdn
  isRequired: true
  description: |+
    Fully qualified domain name of the Registrar pool containing the user data to be exported.
    For example:

    -PoolFqdn "atl-cs-001.litwareinc.com"

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: SqlInstanceName
  isRequired: true
  description: |+
    Name of the SQL Server instance containing the user data to be exported.
    For example:

    -SqlInstanceName "rtc"

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: UserFileFilter
  description: |+
    Full path to a text file containing a list of user URIs for whom data should be exported.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: UserFilter
  description: |+
    Enables you to export data for a single user.
    That user is in dictated by specifying his or her SIP address, minus the sip: prefix.
    For example:

    -UserFilter "kenmyer@litwareinc.com"

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
applicable:
- Lync Server 2013
- Skype for Business Server 2015
- Skype for Business Server 2019
uid: SkypeForBusiness.Export-CsUserData
name: Export-CsUserData
description: |-
  The `Export-CsUserData` cmdlet provides a way for administrators to export user data and/or conference directory for a Skype for Business Server pool.
  That data, which can be saved in the user data format used by Skype for Business Server can then be imported by using the `Import-CsUserData` cmdlet.

  To return a list of all the role-based access control (RBAC) roles this cmdlet has been assigned to (including any custom RBAC roles you have created yourself), run the following command from the Windows PowerShell prompt:

  Get-CsAdminRole | Where-Object {$_.Cmdlets -match "Export-CsUserData"}

  The functions carried out by the `Export-CsUserData` cmdlet are not available in the Skype for Business Server Control Panel.

  NOTE: URNs that have the following characters back slash (\\) and forward slash (/) will cause the powershell command to fail and stop the export of the user data until that point.The following error is reported: Export-CsUserData : "urn:hcd:User1/test@domain.com" is not a valid uniform resource name (At line:1 char:1+ Export-CsUserData -PoolFqdn pool01.domain.com -FileName c:\temp\UserDataExport.zip+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~    + CategoryInfo          : NotSpecified: (:) [Export-CsUserData], UriFormatException    + FullyQualifiedErrorId : System.UriFormatException,Microsoft.Rtc.Management.BlobStor
metadata:
  external help file: Microsoft.Rtc.Management.dll-help.xml
  online version: https://learn.microsoft.com/powershell/module/skype/export-csuserdata
  applicable: Lync Server 2013, Skype for Business Server 2015, Skype for Business Server 2019
  title: Export-CsUserData
  schema: 2.0.0
  manager: rogupta
  author: hirenshah1
  ms.author: hirshah
  ms.reviewer: ""
