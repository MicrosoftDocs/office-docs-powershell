### YamlMime:PowershellCmdlet
summary: |-
  Invokes the process in which a Skype for Business Server database fails over to its mirror database.
  After failover has been completed, the mirror database will become the principal database and will handle all new database requests.
  This cmdlet was introduced in Lync Server 2013.
module: SkypeForBusiness
notes: ""
inputs:
- name: <xref href=" " data-throw-if-not-resolved="False" />
  description: |-
    None.
    The Invoke-CsDatabaseFailover cmdlet does not accept pipelined input.
outputs:
- name: <xref href=" " data-throw-if-not-resolved="False" />
  description: |-
    None.
links:
- text: Get-CsDatabaseMirrorState
  href: Get-CsDatabaseMirrorState.yml
- text: Install-CsMirrorDatabase
  href: Install-CsMirrorDatabase.yml
syntaxes:
- >-
  Invoke-CsDatabaseFailover -DatabaseType <DatabaseNameType> -NewPrincipal <MirrorRole> -PoolFqdn <Fqdn>

   [-Confirm] [-ExcludeDatabaseList <String[]>] [-Force] [-LocalStore] [-Report <String>] [-WhatIf]

   [<CommonParameters>]
examples:
- title: '-------------------------- Example 1 --------------------------'
  code: |-
    Invoke-CsDatabaseFailover -PoolFqdn atl-cs-001.litwareinc.com -DatabaseType "User" -NewPrincipal "Mirror"
  description: |-
    The command shown in Example 1 invokes failover for the User database found on the pool atl-cs-001.litwareinc.com.
    The command causes the User database to failover to a previously-assigned mirror database.
  summary: ""
- title: '-------------------------- Example 2 --------------------------'
  code: |-
    Invoke-CsDatabaseFailover -PoolFqdn atl-cs-001.litwareinc.com -ExcludeDatabase -NewPrincipal "Mirror" -ExcludeDatabaseList "LcsCDR", "LcsLog"
  description: |-
    In Example 2, all databases on the pool atl-cs-001.litwareinc.com are failed over except for the LcsCDR and LcsLog databases.
    These databases are exempted from failover by using the ExcludeDatabaseList parameter.
  summary: ""
parameters:
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: Confirm
  description: |+
    Prompts you for confirmation before executing the command.

  defaultValue: None
  position: Named
  aliases: cf
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="DatabaseNameType" data-throw-if-not-resolved="False" />
  name: DatabaseType
  isRequired: true
  description: |+
    Type of database being failed over.
    Valid values are:

    ActiveMonitoring

    Application

    Archiving

    CentralMgmt

    Edge

    Lyss

    Monitoring

    PersistentChat

    PersistentChatCompliance

    Provision

    Registrar

    SigninTelemetry

    User



  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: ExcludeDatabaseList
  description: |+
    List of databases that should not be failed over.
    For example:

    `-ExcludeDatabaseList "LcsCDR"`

    To prevent multiple databases from being failed over, separate the database names using commas:

    `-ExcludeDatabaseList "LcsCDR", "LcsLog"`

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: Force
  description: |+
    Suppresses the display of any non-fatal error message that might occur when running the command.
    The Force parameter is also used if the current database is not accessible.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: LocalStore
  description: |+
    Retrieves topology information from the local replica of the Central Management store rather than from the Central Management store itself.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="MirrorRole" data-throw-if-not-resolved="False" />
  name: NewPrincipal
  isRequired: true
  description: |+
    Specifies whether failover will be to the primary database or to the mirror database.
    Valid values are:

    Mirror

    Primary



  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="Fqdn" data-throw-if-not-resolved="False" />
  name: PoolFqdn
  isRequired: true
  description: |+
    Fully qualified domain name of the pool containing the database to be failed over.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Report
  description: |+
    Enables you to specify a file path for the log file created when the cmdlet runs.
    For example: `-Report "C:\Logs\DatabaseFailover.html"`

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: WhatIf
  description: |+
    Describes what would happen if you executed the command without actually executing the command.

  defaultValue: None
  position: Named
  aliases: wi
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
applicable:
- Lync Server 2013
- Skype for Business Server 2015
- Skype for Business Server 2019
uid: SkypeForBusiness.Invoke-CsDatabaseFailover
name: Invoke-CsDatabaseFailover
description: |-
  The Invoke-CsDatabaseFailover cmdlet provides a way for administrators to "failover" one or more Skype for Business Server databases.
  For example, suppose you need to temporarily take down the primary database, perhaps to perform a hardware upgrade.
  In that case, you can use the Invoke-CsDatabaseFailover cmdlet to failover from the primary database to the mirror database; when you do that, all requests for the database in question will be routed to the mirror database.
  Later, when the hardware upgrade is complete, you can use this same cmdlet to failback to the primary database.

  Note that any commands using the Invoke-CsDatabaseFailover cmdlet will fail if you have not configured both a primary database and a mirror database for the database in question.

  Skype for Business Server Control Panel: The functions carried out by the Invoke-CsDatabaseFailover cmdlet are not available in the Skype for Business Server Control Panel.
metadata:
  external help file: Microsoft.Rtc.Management.dll-help.xml
  online version: https://learn.microsoft.com/powershell/module/skype/invoke-csdatabasefailover
  applicable: Lync Server 2013, Skype for Business Server 2015, Skype for Business Server 2019
  title: Invoke-CsDatabaseFailover
  schema: 2.0.0
  manager: rogupta
  author: hirenshah1
  ms.author: hirshah
  ms.reviewer: ""
