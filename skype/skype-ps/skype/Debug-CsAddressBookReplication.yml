### YamlMime:PowershellCmdlet
summary: |-
  Verifies replication between Active Directory and the Skype for Business Server Address book service.
  This cmdlet was introduced in Lync Server 2013.
module: SkypeForBusiness
notes: ""
inputs:
- name: <xref href="None" data-throw-if-not-resolved="False" />
  description: |-
    The Debug-CsAddressBookReplication cmdlet does not accept pipelined input.
outputs:
- name: <xref href=" " data-throw-if-not-resolved="False" />
  description: |-
    The Debug-CsAddressBookReplication cmdlet returns instances of the Microsoft.Rtc.SyntheticTransactions.Activities.Database.AddressBookReplicationTaskOutput object.
links:
- text: Test-CsAddressBookService
  href: Test-CsAddressBookService.yml
- text: Test-CsAddressBookWebQuery
  href: Test-CsAddressBookWebQuery.yml
syntaxes:
- >-
  Debug-CsAddressBookReplication [-DomainController <String>] [-Force] [-OutLoggerVariable <String>]

   [-OutVerboseVariable <String>] [-PoolFqdn <Fqdn>] [-User <String>] [-VerifyNormalization] [-VerifyReplication]

   [-AnalyzeFailures] [-StartDate <DateTime>] [-Tenant <Guid>] [<CommonParameters>]
examples:
- title: '-------------------------- Example 1 --------------------------'
  code: |-
    Debug-CsAddressBookReplication
  description: |-
    The command shown in Example 1 verifies Address book replication for the current pool.
    To verify replication for a specified pool, include the PoolFqdn parameter followed by the fully qualified domain name of the pool to be verified.
  summary: ""
- title: '-------------------------- Example 2 --------------------------'
  code: |-
    Debug-CsAddressBookReplication -User "sip:kenmyer@litwareinc.com"
  description: |-
    In Example 2, the User parameter is included when verifying Address book replication for the current pool.
    When the User parameter is included, additional related information is returned for the specified user.
  summary: ""
- title: '-------------------------- Example 3 --------------------------'
  code: |-
    Debug-CsAddressBookReplication -User "sip:kenmyer@litwareinc.com" -VerifyReplication
  description: |-
    Example 3 uses the VerifyReplication parameter to make a change to the specified user account and then verify that this change can be successfully replicated to the Address Book.
  summary: ""
- title: '-------------------------- Example 4 --------------------------'
  code: |-
    Debug-CsAddressBookReplication -VerifyNormalization
  description: |-
    The command shown in Example 4 uses the VerifyNormalization parameter to return information about user accounts where Address Book normalization rules could not be applied.
  summary: ""
parameters:
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: AnalyzeFailures
  description: |+
    When included in a command, Debug-CsAddessBookReplication will return information about any SQL Server stored procedure errors (SprocExecuteErrors) associated with the Address Book.
    The returned data includes information about which stored procedure failed; when the procedure failed; and how many times the procedure has failed.
    Debug-CsAddressBookReplication will also return the SQL error code and provide the failed SQL statement.
    Among other things, that enables you to rerun the statement from within the SQL debugger.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: DomainController
  description: |+
    Enables you to specify a domain controller to connect to when verifying Address book replication.
    If this parameter is not included then the cmdlet will use the first available domain controller.

  defaultValue: None
  position: Named
  aliases: DC
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: Force
  description: |+
    Suppresses the display of any non-fatal error message that might occur when running the command.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: OutLoggerVariable
  description: |+
    When present, detailed output from running the cmdlet will be stored in the specified variable.
    This variable includes a pair of methods - ToHTML and ToXML - that can then be used to save that output to either an HTML or an XML file.

    To store output in a logger variable named $TestOutput use the following syntax:

    `-OutLoggerVariable TestOutput`

    Note: Do not prepend a $ character when specifying the variable name.

    To save the information stored in the logger variable to an HTML file, use a command similar to this:

    `$TestOutput.ToHTML() \> C:\Logs\TestOutput.html`

    To save the information stored in the logger variable to an XML file, use a command similar to this:

    `$TestOutput.ToXML() \> C:\Logs\TestOutput.xml`

  defaultValue: None
  position: Named
  aliases: olv
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: OutVerboseVariable
  description: |+
    When present, detailed output from running the cmdlet will be stored in the specified variable.
    For example, to store output in a variable named $TestOutput use the following syntax

    `-OutVerboseVariable TestOutput`

    Do not prepend a $ character when specifying the variable name.

  defaultValue: None
  position: Named
  aliases: ovv
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="Fqdn" data-throw-if-not-resolved="False" />
  name: PoolFqdn
  description: |+
    Fully qualified domain name of the pool being checked.
    If this parameter is not included then the Debug-CsAddressBookReplication cmdlet will verify the current pool.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="DateTime" data-throw-if-not-resolved="False" />
  name: StartDate
  description: |+
    Indicates the earliest activity date for the errors returned by the AnalyzeFailures parameter.
    For example, if you set the start date to 3/1/2018 (Match 1, 2018, in U.S.
    English) any errors prior to that date (for example, errors recorded on February 21, 2018) will be excluded from the returned data.

    Use the date-time formats specified by your Regional and Language Options settings when assigning values to the StartDate parameter.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="Guid" data-throw-if-not-resolved="False" />
  name: Tenant
  description: |+
    Globally unique identifier (GUID) of the Skype for Business Online tenant account for which address book replication is being verified.
    For example:

    `-Tenant "38aad667-af54-4397-aaa7-e94c79ec2308"`

    You can return the tenant ID for each of your tenants by running this command:

    `Get-CsTenant | Select-Object DisplayName, TenantID`

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: User
  description: |+
    When included, returns detailed replication information for the specified user accounts.
    The user account to be verified can be specified by using the user's SIP address, email address, or SamAccountName.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: VerifyNormalization
  description: |+
    If specified, detailed information will be returned for any user accounts where Address book normalization failed.
    Normalization rules are used to convert phone numbers to the E.164 format used by Skype for Business Server.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: VerifyReplication
  description: |+
    When specified, the Debug-CsAddressBookReplication cmdlet will modify the specified user account in Active Directory and then verify that the changes are replicated to the Address book.
    Note that the user account modification is for testing purposes only, and will not actually change the property values of that account.

  defaultValue: None
  position: Named
  aliases: ""
  applicable:
  - Lync Server 2013
  - Skype for Business Server 2015
  - Skype for Business Server 2019
  parameterValueGroup: ""
applicable:
- Lync Server 2013
- Skype for Business Server 2015
- Skype for Business Server 2019
uid: SkypeForBusiness.Debug-CsAddressBookReplication
name: Debug-CsAddressBookReplication
description: |-
  Address Book servers are intermediaries between Active Directory Domain Services (AD DS) and Skype for Business Server.
  The Address Book server ensures that the user information stored in Skype for Business Server is in sync with the user information stored in Active Directory.
  This is done by periodically syncing Address Book files with information stored in the User database.

  The Debug-CsAddressBookReplication cmdlet enables administrators to verify that data is being replicated between Active Directory and Skype for Business Server.
  Fully testing replication between Active Directory and the Address Book server can potentially be time-consuming and resource-intensive; because of that, it is recommended that Debug-CsAddressBookReplication only be used in troubleshooting scenarios.
  If you want to periodically "spot check" the functioning of your Address Book server you should use the Test-CsAddressBookService cmdlet and/or the Test-CsAddressBookWebQuery cmdlet instead.

  The functions carried out by the Debug-CsAddressBookReplication cmdlet are not available in the Skype for Business Server Control Panel.
metadata:
  external help file: Microsoft.Rtc.Management.dll-help.xml
  online version: https://learn.microsoft.com/powershell/module/skype/debug-csaddressbookreplication
  applicable: Lync Server 2013, Skype for Business Server 2015, Skype for Business Server 2019
  title: Debug-CsAddressBookReplication
  schema: 2.0.0
  manager: rogupta
  author: hirenshah1
  ms.author: hirshah
  ms.reviewer: ""
