### YamlMime:PowershellCmdlet
summary: |-
  This cmdlet is used to retrieve the status of batch policy assignment operations.
module: MicrosoftTeamsPowerShell
notes: ""
outputs:
- name: <xref href="OperationId" data-throw-if-not-resolved="False" />
  description: |-
    The ID of the operation that can be used with the Get-CsBatchPolicyAssignmentOperation cmdlet to get the status of the operation.
- name: <xref href="CompletedCount" data-throw-if-not-resolved="False" />
  description: |-
    The number of users in the batch for which the assignment has been completed (possibly with an error).
- name: <xref href="CompletedTime" data-throw-if-not-resolved="False" />
  description: |-
    The date and time when the operation was completed.
- name: <xref href="CreatedTime" data-throw-if-not-resolved="False" />
  description: |-
    The date and time when the operation was created.
- name: <xref href="ErrorCount" data-throw-if-not-resolved="False" />
  description: |-
    The number of users in the batch for which the assignment failed.
- name: <xref href="InProgressCount" data-throw-if-not-resolved="False" />
  description: |-
    The number of users in the batch for which the assignment is in progress.
- name: <xref href="NotStartedCount" data-throw-if-not-resolved="False" />
  description: |-
    The number of users in the batch for which the assignment has not yet been performed.
- name: <xref href="OperationId" data-throw-if-not-resolved="False" />
  description: |-
    The ID of the operation.
- name: <xref href="OperationName" data-throw-if-not-resolved="False" />
  description: |-
    The name of the operation, if one was specific when the operation was created.
- name: <xref href="OverallStatus" data-throw-if-not-resolved="False" />
  description: |-
    The overall status of the operations: NotStarted, InProgress, Complete
- name: <xref href="UserState" data-throw-if-not-resolved="False" />
  description: |-
    Contains the status for each user in the batch.

    **Id:** The ID of the user as specified when the batch was submitted.  Either the user object ID (guid) or UPN/SIP/email.

    **result:** The result of the assignment operation for the user: Success or an error. Some common errors include:
    - User not found. Check the ID or SIP address of the user to confirm it is correct. If the UPN or email address was used, but it does not match the SIP address, then the user will not be found.
    - Multiple users found with a given SIP address. This is typically a result of on-prem to cloud sync.  Check your directory and update the affected users.
    - User invalid. If you are syncing users from on-prem to the cloud, some users might not have been synced properly and are in an invalid state. Check the sync status for the user.
    - User ineligible for the policy or missing a necessary license.  Check the documentation for the specific policy type being assigned to understand the requirements and update the user accordingly.
    - The policy settings are incorrect.  Check the documentation for the specific policy type being assigned to understand the requirements and update the policy accordingly.
    - Unknown errors. In rare cases, there can be transient system errors that failed on all initial retry attempts during batch process.  Resubmit these users in a separate batch.

    **state:** The status for the user: NotStarted, InProgress, Completed
links:
- text: New-CsBatchPolicyAssignmentOperation
  href: New-CsBatchPolicyAssignmentOperation.yml
syntaxes:
- >-
  Get-CsBatchPolicyAssignmentOperation [-Status <String>] [-Break] [-HttpPipelineAppend <SendAsyncStep[]>]

   [-HttpPipelinePrepend <SendAsyncStep[]>] [-Proxy <Uri>] [-ProxyCredential <PSCredential>]

   [-ProxyUseDefaultCredentials] [<CommonParameters>]
- >-
  Get-CsBatchPolicyAssignmentOperation -Identity <String> [-Break] [-HttpPipelineAppend <SendAsyncStep[]>]

   [-HttpPipelinePrepend <SendAsyncStep[]>] [-Proxy <Uri>] [-ProxyCredential <PSCredential>]

   [-ProxyUseDefaultCredentials] [<CommonParameters>]
examples:
- title: EXAMPLE 1
  code: |-
    Get-CsBatchPolicyAssignmentOperation

    OperationId                          OperationName           OverallStatus CreatedTime          CreatedBy
    -----------                          -------------           ------------- -----------          ---------
    e640a5c9-c74f-4df7-b62e-4b01ae878bdc Assigning Kiosk mtg     Completed     1/30/2020 3:21:07 PM aeb7c0e7-2f6d-43ef-bf33-bfbcb93fdc64
    01b9b2b7-5dbb-487c-b4ea-887c7c66559c Assigning allow calling Completed     1/30/2020 3:55:16 PM aeb7c0e7-2f6d-43ef-bf33-bfbcb93fdc64
    47bbc636-365d-4441-af34-9e0eceb05ef1                         Completed     1/30/2020 4:14:22 PM aeb7c0e7-2f6d-43ef-bf33-bfbcb93fdc64
  description: |-
    In this example, the status of all batch assignment operations is returned.
  summary: ""
- title: EXAMPLE 2
  code: |-
    Get-CsBatchPolicyAssignmentOperation -OperationId 01b9b2b7-5dbb-487c-b4ea-887c7c66559c  | fl

    OperationId     : 01b9b2b7-5dbb-487c-b4ea-887c7c66559c
    OperationName   : Assigning allow calling
    OverallStatus   : Completed
    CreatedBy       : aeb7c0e7-2f6d-43ef-bf33-bfbcb93fdc64
    CreatedTime     : 1/30/2020 3:55:16 PM
    CompletedTime   : 1/30/2020 3:59:06 PM
    CompletedCount  : 3
    ErrorCount      : 1
    InProgressCount : 0
    NotStartedCount : 0
    UserState       : {f0d9c148-27c1-46f5-9685-544d20170ea1, cc05e18d-5fc0-4096-8461-ded64d7356e0,
                      bcff5b7e-8d3c-4721-b34a-63552a6a53f9}
  description: |-
    In this example, the details of a specific operation are returned.
  summary: ""
- title: EXAMPLE 3
  code: |-
    Get-CsBatchPolicyAssignmentOperation -OperationId 001141c3-1daa-4da1-88e9-66cc01c511e1 | Select -ExpandProperty UserState

    Id                                    Result           State
    --                                    ------           -----
    f0d9c148-27c1-46f5-9685-544d20170ea1  Success          Completed
    cc05e18d-5fc0-4096-8461-ded64d7356e0  Success          Completed
    bcff5b7e-8d3c-4721-b34a-63552a6a53f9  User not found   Completed
  description: |-
    In this example, the UserState property is expanded to see the status of each user in the batch. In this example, one of the users was not found.
  summary: ""
parameters:
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: Break
  description: |+
    Wait for .NET debugger to attach

  defaultValue: "False"
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SendAsyncStep" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: HttpPipelineAppend
  description: |+
    SendAsync Pipeline Steps to be appended to the front of the pipeline

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SendAsyncStep" data-throw-if-not-resolved="False" /><span>[</span><span>]</span>
  name: HttpPipelinePrepend
  description: |+
    SendAsync Pipeline Steps to be prepended to the front of the pipeline

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Identity
  isRequired: true
  description: |+
    The ID of a batch policy assignment operation.

  defaultValue: None
  position: Named
  aliases: OperationId
  parameterValueGroup: ""
- type: <xref href="Uri" data-throw-if-not-resolved="False" />
  name: Proxy
  description: |+
    The URI for the proxy server to use

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="PSCredential" data-throw-if-not-resolved="False" />
  name: ProxyCredential
  description: |+
    Credentials for a proxy server to use for the remote call

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="SwitchParameter" data-throw-if-not-resolved="False" />
  name: ProxyUseDefaultCredentials
  description: |+
    Use the default credentials for the proxy

  defaultValue: "False"
  position: Named
  aliases: ""
  parameterValueGroup: ""
- type: <xref href="String" data-throw-if-not-resolved="False" />
  name: Status
  description: |+
    Option filter

  defaultValue: None
  position: Named
  aliases: ""
  parameterValueGroup: ""
uid: MicrosoftTeamsPowerShell.Get-CsBatchPolicyAssignmentOperation
name: Get-CsBatchPolicyAssignmentOperation
description: |-
  This cmdlets returns the status of all batch policy assignment operations for the last 30 days.  If an operation ID is specified, the detailed status for that operation is returned including the status for each user in the batch.
metadata:
  external help file: Microsoft.TeamsCmdlets.PowerShell.Custom.dll-Help.xml
  Module Name: MicrosoftTeams
  online version: https://learn.microsoft.com/powershell/module/teams/get-csbatchpolicyassignmentoperation
  schema: 2.0.0
  author: tomkau
  ms.author: tomkau
  ms.reviewer: williamlooney
